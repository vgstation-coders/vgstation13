<!-- 
Title: Integrated Hardsuit Controller
Used In File(s): /code/modules/clothing/spacesuits/rig/rig.dm
 -->

<style type="text/css">
	.floatLeft {
		float: left;
		margin-left: 5px;
	}
	.redText {
		color: red;
	}
	.boldText {
		font-weight: bold;
	}
	.textSpanCenter {
		width: 100%;
		text-align: center;
	}
	<!-- display bar override -->
	.selectedLeft {
		background-color:#a1a1b6;
	}
</style>
<div style="width: 100%;">
	<div style="float:left; width:50%">
{{if data.interfacelock || data.malf > 0}}
	<div class='redText boldText textSpanCenter'>-- HARDSUIT INTERFACE OFFLINE --</div>
{{else}}
	{{if data.aicontrol && data.ai != 1}}
		<div class='redText boldText textSpanCenter'>-- HARDSUIT CONTROL OVERRIDDEN BY AI --</div>
	{{else}}
		<div>
			<div class='inlineBlock extraTopPadding'>
				<div class='fixedLeft boldText'>
					Power supply
				</div>
				<div>
					{{:helper.displayBar(data.chargestatus, 0, 50, (data.chargestatus >= 35) ? 'good' : (data.chargestatus >= 15) ? 'average' : 'bad', '<center>' + data.charge + '/' + data.maxcharge + '</center>')}}
				</div>
			</div>
			<div class="line"></div>
			<div>
				<div class="line">
					<div class="floatLeft">
					AI control: {{:helper.link((data.aioverride) ? 'Enabled' : 'Disabled', 'circle-arrow-s', {'toggle_ai_control' : 1}, null)}}
					</div>
					<div class="floatLeft">
						Suit status: {{:helper.link((data.sealing) ? "Processing" : (data.seals == 1) ? "Inactive" : "Active", 'circle-arrow-s', {'toggle_seals' : 1}, null)}}
					</div>
				</div>
				<div class='floatLeft'>
						Cover status: {{:helper.link((data.emagged || !data.securitycheck) ? "Error" : (data.coverlock) ? "Locked" : "Unlocked", 'circle-arrow-s', {'toggle_suit_lock' : 1}, null)}}
				</div>
			</div>
		</div>
		<div class="line"></div>
		<div style="width:70%;" class='statusDisplay'>
			<center>Suit pieces</center><hr />
		
			<div class='floatLeft'>
				Helmet: {{:helper.link(data.helmet, 'circle-arrow-s', {'toggle_piece' : 'helmet'}, null)}}
			</div>

			<div class='floatLeft'>
			Gauntlets: {{:helper.link(data.gauntlets, 'circle-arrow-s', {'toggle_piece' : 'gauntlets'}, null)}}
			</div>
		
			<div class="floatLeft">
				Boots: {{:helper.link(data.boots, 'circle-arrow-s', {'toggle_piece' : 'boots'}, null)}}
			</div>
		
			<div class="floatLeft">
				Chest: {{:helper.link(data.chest, 'circle-arrow-s', {'toggle_piece' : 'chest'}, null)}}
			</div>
		</div>
		</div>
		<div style="float:left;">
			<div class="floatLeft">
				{{:(data.seals == 1 || data.sealing == 1) ? "<h3><div class = 'bad'>HARDSUIT SYSTEMS OFFLINE</div></h3>" : (data.primarysystem) ? "<h3>Primary: " + data.primarysystem + "</h3>" : "None"}}
				{{for data.modules}}
					{{:(value.name == data.primarysystem) ? "<div style='width:300px; background-color:#303030;' class='statusDisplay'>" : "<div style=width:300px; class='statusDisplay'>"}}
						<div class="line">
							<center>{{:value.name}}</center><hr />
							{{:helper.link('Select', 'circle-arrow-s', {'interact_module' : value.index, 'module_mode' : 'select'}, null, 'fixedLeft')}}
							{{if value.can_use == 1}}
								{{:helper.link(value.engagestring, 'circle-arrow-s', {'interact_module' : value.index, 'module_mode' : 'engage'}, null, 'fixedLeft')}}
							{{/if}}
						</div>
							{{if value.can_toggle == 1}}
							<div class="line">
								{{:helper.link((value.is_active == 1) ? value.deactivatestring : value.activatestring, 'circle-arrow-s', {'interact_module' : value.index, 'module_mode' : (value.is_active == 1) ? 'deactivate' : 'activate'}, null, 'fixedLeft')}}
							</div>
							{{/if}}
						<div class="line">{{:helper.link("Engage", null, null, null, 'fixedLeft')}}{{:helper.link(value.engagecost, null, null, null, 'fixedLeft')}}</div>
						<div class="line">{{:helper.link("Activate", null, null, null,'fixedLeft')}}{{:helper.link(value.activecost, null, null, null, 'fixedLeft')}}</div>
						<div class="line">{{:helper.link("Passive", null, null, null, 'fixedLeft')}}{{:helper.link(value.passivecost, null, null, null, 'fixedLeft')}}</div>
						{{if value.charges}}
						<div class="line">{{:helper.link("Selected", null, null, null, 'fixedLeft')}}{{:helper.link(value.chargetype, null, null, null, 'fixedLeft selectedLeft')}}</div>
							<hr />
							{{for value.charges :itemValue:itemIndex}}
								{{:helper.link(itemValue.caption, null, {'interact_module' : value.index, 'module_mode' : 'select_charge_type', 'charge_type' : itemValue.index}, null, 'fixedLeft')}}
							{{/for}}
						{{/if}}
					</div>
				{{empty}}
					None
				{{/for}}
			</div>
		</div>
	{{/if}}
{{/if}}